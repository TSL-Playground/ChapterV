<html>
  <head>
     <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>

     <script type="text/javascript" src="https://www.airconsole.com/api/airconsole-1.7.0.js"></script>

     <!-- MENU STYLE -->
     <link rel="stylesheet" id="menu-controller-style" type="text/css" href="CSS/controller-style/menu-controller-style.css"/>

     <!-- HOW TO PLAY STYLE -->

     <!-- DRAWING TIMER SCENE STYLE -->
     <link rel="alternate stylesheet" id="topic-display-style" disabled=true type="text/css" href="CSS/controller-style/topic-display-style.css"/>
     <link rel="alternate stylesheet" id="time-ends-style" disabled=true type="text/css" href="CSS/controller-style/time-ends-style.css"/>

     <!-- DISPLAY ALL PROMPTS STYLE -->
     <link rel="alternate stylesheet" id="chosen-prompt-controller-style" disabled=true type="text/css" href="CSS/controller-style/chosen-prompt-controller-style.css">

     <!-- DISPLAY VOTING PLAYER A STYLE -->
     <link rel="alternate stylesheet" id="voting-player-a-controller-style" disabled=true type="text/css" href="CSS/controller-style/voting-player-a-style.css">

     <!-- DISPLAY VOTING OTHER PLAYER STYLE -->
     <link rel="alternate stylesheet" id="voting-other-player-controller-style" disabled=true type="text/css" href="CSS/controller-style/voting-other-player-style.css">

     <!-- BONUS ROUND DISCUSSION STARTS -->
     <!-- BONUS ROUND DISCUSSION ENDS -->

     <!-- CURRENT SCORE ALL PLAYER STARTS -->
     <!-- CURRENT SCORE ALL PLAYER ENDS -->

     <!-- Scene Manager -->
     <script type="text/javascript" src="Javascript/scene-manager.js"> </script>
     <script>
        function hideAll()
        {
          hideTopicDisplay();
          hideTimeEnds();
          hideChosenPromptController();
          hideWaitForOthers();
          hideVotingOtherPlayer();
          hideVotingPlayerA();
          hideAddPointController();
        }
     </script>

     <!-- Airconsole Controller Setup -->
     <script type="text/javascript">
       navigator.vibrate = (navigator.vibrate ||
                            navigator.webkitVibrate ||
                            navigator.mozVibrate ||
                            navigator.msVibrate);

       var airconsole;
       /**
        * Sets up the communication to the screen.
        */
       function init() {
         airconsole = new AirConsole({"orientation": "landscape"});

         /*
          * Checks if this device is part of the active game.
          */
         airconsole.onActivePlayersChange = function(player) {
           /*var div = document.getElementById("player_id");
           if (player !== undefined && 3 <= player && player <= 6) {
             div.innerHTML =  (["Player 1", "Player 2", "Player 3", "Player 4", "Player 5", "Player 6"][player]);
           } else {
             div.innerHTML = "This game can be played by 3-6 people!";
           }*/
         };

         /*
          * Makes the device vibrate if the screen says so.
          */
         airconsole.onMessage = function(from, data) {
           if (from == AirConsole.SCREEN && data.vibrate)
           {
             navigator.vibrate(data.vibrate);
             console.log("Vibrating: " + data.vibrate);
           }
           if (data.isStartButtonPressed)
           {
             hideMenuController();
             showTopicDisplay();
           }
           if (from == AirConsole.SCREEN && data.prompt!=null)
           {
             document.getElementById("promptDrawing").textContent = data.prompt;
           }
           if (from == AirConsole.SCREEN && data.drawingTimeEnds)
           {
             hideTopicDisplay();
             showTimeEnds();
           }
           if (from == AirConsole.SCREEN && data.coolDownEnds)
           {
             hideTimeEnds();
             showChosenPromptController();
           }
           if (from == AirConsole.SCREEN && data.allPlayerVoted)
           {
             hideWaitForOthers();
           }
           if (data.votingPlayerA)
           {
             hideAddPointController();
             showVotingPlayerA();
             airconsole.message(AirConsole.SCREEN, {showCurrentScore: true});
           }
           else if (data.votingOtherPlayer)
           {
             hideAddPointController();
             showVotingOtherPlayer();
             airconsole.message(AirConsole.SCREEN, {showCurrentScore: true});
           }

           if (data.deviceCurrentScore !== undefined)
           {
             document.getElementById("currentPoint1").textContent = "Score: " + data.deviceCurrentScore;
             document.getElementById("currentPoint2").textContent = "Score: " + data.deviceCurrentScore;
           }
         };
       }

       function checkEnoughPlayers() {
         var active_players = airconsole.getActivePlayerDeviceIds();
         var connected_controllers = airconsole.getControllerDeviceIds();
         if (connected_controllers.length < 3) return false;
         else return true;
       }

     </script>
  </head>

  <body onload="init(); hideAll();">
    <!-- MENU SCENE STARTS -->
    <div id = "menu-controller">
      <button id="leftButton"> Start </button>
      <button id="rightButton"> How to Play </button>
      <!-- Start Button Pressed -->
      <script>
        document.getElementById("leftButton").onclick = function() {
          if(checkEnoughPlayers())
          {
            hideMenuController();
            showTopicDisplay();
            airconsole.broadcast({isStartButtonPressed: true})
          }
        };
      </script>
    </div>
    <!-- MENU SCENE ENDS -->

    <!-- HOW TO PLAY SCENE STARTS -->
    <!-- HOW TO PLAY SCENE ENDS -->

    <!-- DRAWING TOPIC SCENE STARTS -->
    <div id = "topic-display">
      <h1 id="yourTopicIs"> Draw </h1>
      <p id="promptDrawing"> </p>
    </div>
    <!-- DRAWING TOPIC SCENE ENDS -->

    <!-- TIME ENDS SCENE STARTS -->
    <div id = "time-ends">
      <h1> Time Ends!! </h1>
    </div>
    <!-- TIME ENDS SCENE ENDS -->

    <!-- DISPLAY ALL PROMPTS STARTS -->
    <div id = "chosen-prompt-controller">
      <h1> Are you done voting? </h1>
      <button id='yesButton'> Yes </button>
      <!-- Yes button pressed -->
      <script>
        document.getElementById("yesButton").onclick = function() {
          airconsole.message(AirConsole.SCREEN, {isFinishedVoting: true})
          hideChosenPromptController();
          showWaitForOthers();
        };
      </script>
    </div>
    <!-- DISPLAY ALL PROMPTS ENDS -->

    <div id = "wait-for-others">
      <h1> Waiting for other player... </h1>
    </div>

    <!-- DISPLAY VOTING PLAYER A STARTS -->
    <div id = "voting-player-a-controller">
      <p id="currentPoint1"> Score: </p>
      <h1 id="title1"> How many people get your drawing correct? </h1>
      <p id="subtitle1"> (including you) </p>
      <button id='button1'> 1 </button>
      <button id='button2'> 2 </button>
      <button id='button3'> 3 </button>
      <button id='button4'> 4 </button>
      <button id='button5'> 5 </button>
      <button id='button6'> 6 </button>
      <script>
        document.getElementById("button1").onclick = function() {
          airconsole.message(AirConsole.SCREEN, {noPeopleCorrect: 1});
          hideVotingPlayerA();
          showAddPointController();
        }
        document.getElementById("button2").onclick = function() {
          airconsole.message(AirConsole.SCREEN, {noPeopleCorrect: 2});
          hideVotingPlayerA();
          showAddPointController();
        }
        document.getElementById("button3").onclick = function() {
          airconsole.message(AirConsole.SCREEN, {noPeopleCorrect: 3});
          hideVotingPlayerA();
          showAddPointController();
        }
        document.getElementById("button4").onclick = function() {
          airconsole.message(AirConsole.SCREEN, {noPeopleCorrect: 4});
          hideVotingPlayerA();
          showAddPointController();
        }
        document.getElementById("button5").onclick = function() {
          airconsole.message(AirConsole.SCREEN, {noPeopleCorrect: 5});
          hideVotingPlayerA();
          showAddPointController();
        }
        document.getElementById("button6").onclick = function() {
          airconsole.message(AirConsole.SCREEN, {noPeopleCorrect: 6});
          hideVotingPlayerA();
          showAddPointController();
        }
      </script>
    </div>
    <!-- DISPLAY VOTING PLAYER A ENDS -->

    <!-- DISPLAY VOTING OTHER PLAYER STARTS -->
    <div id = "voting-other-player-controller">
      <p id="currentPoint2"> Score: </p>
      <h1 id="title2"> Do you get correct answer? </h1>
      <button id='yesButton2'> Yes </button>
      <button id='noButton2'> No </button>
      <script>
        document.getElementById("yesButton2").onclick = function() {
          airconsole.message(AirConsole.SCREEN, {noPeopleCorrect: 1});
          hideVotingOtherPlayer();
          showAddPointController();
        }
        document.getElementById("noButton2").onclick = function() {
          hideVotingOtherPlayer();
          showAddPointController();
        }
      </script>
    </div>
    <!-- DISPLAY VOTING OTHER PLAYER ENDS -->

    <!-- BONUS ROUND DISCUSSION STARTS -->
    
    <!-- BONUS ROUND DISCUSSION ENDS -->

    <!-- CURRENT SCORE ALL PLAYER STARTS -->
    <!-- CURRENT SCORE ALL PLAYER ENDS -->
  </body>
</html>
